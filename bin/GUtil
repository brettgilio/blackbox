#!/run/current-system/profile/bin/bash

M_HEIGHT=15
M_WIDTH=40
M_CHOICE_HEIGHT=4
M_MAIN_BACKTITLE="GUtil"
M_TITLE="GUtil"
M_MENU="What would you like to do?"

OPTIONS=(1 "Development"
	 2 "Generate Symlinks"
	 3 "Option 3")

CHOICE=$(dialog --clear \
		--backtitle "$M_BACKTITLE" \
		--title "$M_TITLE" \
		--menu "$M_MENU" \
		$M_HEIGHT $M_WIDTH $M_CHOICE_HEIGHT \
		"${OPTIONS[@]}" \
		2>&1 >/dev/tty)

case $CHOICE in
    1)
	DEVELOPMENT=(1 "Base GNU Emacs"
		     2 "Python Environment")
	
	DEV_CHOICE=$(dialog --clear \
			    --backtitle "$M_BACKTITLE" \
			    --title "$M_TITLE" \
			    --menu "Choose a development environment:" \
			    $M_HEIGHT $M_WIDTH $M_CHOICE_HEIGHT \
			    "${DEVELOPMENT[@]}" \
			    2>&1 >/dev/tty)
	
	case $DEV_CHOICE in
	    1)
		echo "Loading: Base GNU Emacs"
		guix environment -m "$HOME/Repos/guix-system/manifests/emacs-manifest.scmx" ;;
	    2)
		echo "Loading: Python Environment"
		guix environment -m "$HOME/Repos/guix-system/manifests/emacs-manifest.scmx" \
		    -m "$HOME/Repos/guix-system/manifests/python-manifest.scmx" ;;
	esac ;;
    2)
	./configuration-install.sh ;;
    3)
	echo "You chose Option 3" ;;
esac
