#!/run/current-system/profile/bin/bash

cmd="guix environment --ad-hoc"

profile="$HOME/Repos/guix-system/manifests/profiles/profile-manifest"

for arg in "$@"
do
    if [ "$arg" == "--conf-install" ]
    then
        echo "Configuration Installer"
	# Implement configuration installer
    fi

    ###
    ###
    ###

    if [ "$arg" == "--guix-profile" ]
    then
        guix package -m $profile.scm
    fi

    if [ "$arg" == "--nix-profile" ]
    then
        nix-env -f $profile.nix -i --remove-all
    fi

    ###
    ###
    ###
    
    if [ "$arg" == "--emacs" ] || [ "$arg" == "-e" ]
    then
        $cmd meta-emacs
    fi
    
    if [ "$arg" == "--python" ] || [ "$arg" == "-p" ]
    then
        $cmd meta-python
    fi

    if [ "$arg" == "--cobjc" ] || [ "$arg" == "-c" ]
    then
        $cmd meta-cobjc
    fi

    if [ "$arg" == "--coq" ] || [ "$arg" == "-x" ]
    then
        $cmd meta-coq
    fi
    
    if [ "$arg" == "--ocaml" ] || [ "$arg" == "-o" ]
    then
	$cmd meta-ocaml
    fi
done

